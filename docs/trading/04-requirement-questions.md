# 구현 전 필수 확정 질문

## 현재 확정된 항목
- 1차 릴리즈는 100% 현금주문만 지원 (미수/신용 제외)
- 일반주문 범위: 매수/매도 + 시장가/지정가 (예약/시간외/자동전략 제외)
- 체결 주체: 내부 Mock Exchange Engine
- 부분체결: 지원
- 체결 판단 데이터: `mock_quotes` 고정 시세 테이블 사용
- 부분체결 기준: `available_quantity` 기반
- 지정가 체결 조건:
  - 매수: `quote.price <= limitPrice`
  - 매도: `quote.price >= limitPrice`
- 미체결 재매칭 시점: 시세 갱신 API 호출 시

## 주문/체결 정책
- [확정] 부분체결 상태 주문은 즉시 취소 가능
- [확정] 지정가 주문은 `DAY/IOC/FOK`, 시장가 주문은 `IOC` 고정

## 금액/수량 규칙
- 수량 단위(1주 단위만?)
- 호가 단위/가격 반올림 규칙
- [확정] 수수료는 체결 단위 계산, 세금은 2차 미적용(0), 반올림은 소수점 4자리 `HALF_UP`

## 상태/이벤트 모델
- 상태 전이 소스 오브 트루스는 DB인가 이벤트 스트림인가?
- 이벤트 중복/역순 처리 정책은?
- 사용자에게 노출할 최종 상태 집합은?

## 운영/장애 대응
- Mock Exchange 이벤트 처리 실패 시 재시도 횟수는?
- 타임아웃 기준과 보상 트랜잭션 정책은?
- 정산 대사 실패 시 수동 개입 절차는?
- [확정] `DAY` 주문 만료는 장 종료 배치에서 `EXPIRED` 처리

## 2차 확정 참고 문서
- `06-phase2-requirement-lock.md`: Q1~Q4 확정안
